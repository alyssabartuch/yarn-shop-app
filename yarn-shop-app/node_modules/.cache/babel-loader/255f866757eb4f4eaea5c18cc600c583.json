{"ast":null,"code":"import _objectSpread from\"/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Header from'./Header';import Inventory from'./Inventory';import Order from'./Order';import sampleItems from'../sample-items';import Item from'./Item';import base from'../base';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={items:{},order:{},visible:false};_this.addItem=function(item){var items=_objectSpread({},_this.state.items);items[\"item\".concat(Date.now())]=item;_this.setState({items:items});};_this.updateItem=function(key,updatedItem){var items=_objectSpread({},_this.state.items);items[key]=updatedItem;_this.setState({items:items});};_this.deleteItem=function(key){var items=_objectSpread({},_this.state.items);items[key]=null;_this.setState({items:items});};_this.loadSampleItems=function(){_this.setState({items:sampleItems});};_this.addToOrder=function(key){var order=_objectSpread({},_this.state.order);order[key]=order[key]+1||1;_this.setState({order:order});};_this.removeFromOrder=function(key){var order=_objectSpread({},_this.state.order);delete order[key];_this.setState({order:order});};_this.openAdminPanel=function(){_this.setState(function(prev){return{visible:!prev.visible};});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;// first reinstate localStorage\nvar localStorageRef=localStorage.getItem(params.storeId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.storeId,\"/items\"),{context:this,state:'items'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"yarn-shop\"},React.createElement(\"div\",{className:\"menu\"},React.createElement(Header,{tagline:\"- - - Love in Every Twist - - -\"}),React.createElement(\"ul\",{className:\"items\"},Object.keys(this.state.items).map(function(key){return React.createElement(Item,{key:key,index:key,details:_this2.state.items[key],addToOrder:_this2.addToOrder});}))),React.createElement(Order,{items:this.state.items,order:this.state.order,removeFromOrder:this.removeFromOrder}),React.createElement(Inventory,{visible:this.state.visible,openAdminPanel:this.openAdminPanel,addItem:this.addItem,updateItem:this.updateItem,deleteItem:this.deleteItem,loadSampleItems:this.loadSampleItems,items:this.state.items,storeId:this.props.match.params.storeId})));}}]);return App;}(React.Component);App.transitionOptions={classNames:\"item-edit\",timeout:{enter:500,exit:500}};export default App;","map":{"version":3,"sources":["/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/src/components/App.js"],"names":["React","Header","Inventory","Order","sampleItems","Item","base","App","state","items","order","visible","addItem","item","Date","now","setState","updateItem","key","updatedItem","deleteItem","loadSampleItems","addToOrder","removeFromOrder","openAdminPanel","prev","params","props","match","localStorageRef","localStorage","getItem","storeId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component","transitionOptions","classNames","timeout","enter","exit"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from './Header';\nimport Inventory from './Inventory';\nimport Order from './Order';\nimport sampleItems from '../sample-items'\nimport Item from './Item';\nimport base from '../base';\n\nclass App extends React.Component {\n    state = {\n        items: {},\n        order: {},\n        visible: false\n    };\n\n    static propTypes = { \n        match: PropTypes.object\n    }\n\n    static transitionOptions = {\n        classNames: \"item-edit\",\n        timeout: { enter: 500, exit: 500 }\n    }\n\n    componentDidMount() {\n        const { params } = this.props.match;\n        \n        // first reinstate localStorage\n        const localStorageRef = localStorage.getItem(params.storeId)\n        if (localStorageRef) {\n            this.setState({ order: JSON.parse(localStorageRef) })\n        }\n        this.ref = base.syncState(`${params.storeId}/items`, {\n            context: this,\n            state: 'items'\n        });\n        \n    }\n    componentDidUpdate() {\n        localStorage.setItem(this.props.match.params.storeId, JSON.stringify(this.state.order));\n    }\n\n    componentWillUnmount() {\n        base.removeBinding(this.ref);        \n    }\n\n    addItem = (item) => {\n        const items = {...this.state.items};\n        items[`item${Date.now()}`] = item;\n        this.setState({ items });\n    } \n\n    updateItem = (key, updatedItem) => {\n        const items = {...this.state.items};\n        items[key] = updatedItem;\n        this.setState({ items })\n    }\n\n    deleteItem = (key) => {\n        const items = {...this.state.items};\n        items[key] = null;\n        this.setState({ items });\n\n    }\n\n    loadSampleItems = () => {\n        this.setState({ items: sampleItems });\n    }\n    \n    addToOrder = (key) => {\n        const order = {...this.state.order};\n        order[key] = order[key] + 1 || 1;\n        this.setState({ order });\n    }\n\n    removeFromOrder = (key) => {\n        const order = {...this.state.order};\n        delete order[key];\n        this.setState({ order });\n    }\n\n    openAdminPanel = () => {\n        this.setState(prev => ({ visible: !prev.visible }))\n    }\n\n    render() {        \n        return (\n            <>\n                <div className=\"yarn-shop\">\n                    <div className=\"menu\">\n                        <Header tagline=\"- - - Love in Every Twist - - -\"/>\n                        <ul className=\"items\">\n                            {Object.keys(this.state.items).map(key => (\n                                <Item \n                                    key={key} \n                                    index={key}\n                                    details={this.state.items[key]} \n                                    addToOrder={this.addToOrder} \n                                />\n                            ))}\n                        </ul>\n                    </div>\n                    <Order \n                        items={this.state.items} \n                        order={this.state.order}\n                        removeFromOrder={this.removeFromOrder}\n                    />\n                    <Inventory \n                        visible={this.state.visible}\n                        openAdminPanel={this.openAdminPanel}\n                        addItem={this.addItem} \n                        updateItem={this.updateItem}\n                        deleteItem={this.deleteItem}\n                        loadSampleItems={this.loadSampleItems} \n                        items={this.state.items}\n                        storeId={this.props.match.params.storeId}\n                    />\n                </div>\n            </>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}