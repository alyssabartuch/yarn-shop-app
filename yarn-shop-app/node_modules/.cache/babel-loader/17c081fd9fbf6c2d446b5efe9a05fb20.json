{"ast":null,"code":"import _objectSpread from\"/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Header from'./Header';import Inventory from'./Inventory';import Order from'./Order';import sampleFishes from'../sample-fishes';import Fish from'./Fish';import base from'../base';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={fishes:{},order:{},visible:true};_this.addFish=function(fish){// 1. take a copy of existing state \nvar fishes=_objectSpread({},_this.state.fishes);// 2. add new fish to fishes var\nfishes[\"fish\".concat(Date.now())]=fish;// 3. set the new fishes object to state\n_this.setState({fishes:fishes});// this.setState({\n//     fishes: fishes\n// });\n};_this.updateFish=function(key,updatedFish){var fishes=_objectSpread({},_this.state.fishes);fishes[key]=updatedFish;_this.setState({fishes:fishes});};_this.deleteFish=function(key){// 1. take a copy of existing state\nvar fishes=_objectSpread({},_this.state.fishes);// 2. set fish to null to delete (firebase)\nfishes[key]=null;// 3. update state\n_this.setState({fishes:fishes});};_this.loadSampleFishes=function(){_this.setState({fishes:sampleFishes});};_this.addToOrder=function(key){// 1. take a copy of existing state\nvar order=_objectSpread({},_this.state.order);// 2. either add to order or update the order qty\norder[key]=order[key]+1||1;// 3. call set state\n_this.setState({order:order});};_this.removeFromOrder=function(key){var order=_objectSpread({},_this.state.order);delete order[key];_this.setState({order:order});};_this.handleClick=function(){_this.setState(function(prev){return{visible:!prev.visible};});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.match.params;// first reinstate localStorage\nvar localStorageRef=localStorage.getItem(params.storeId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(params.storeId,\"/fishes\"),{context:this,state:'fishes'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){base.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(React.Fragment,null,React.createElement(\"button\",{type:\"button\",className:\"admin-panel-btn\",onClick:this.handleClick},\"Admin Pannel\"),React.createElement(\"div\",{className:\"catch-of-the-day\"},React.createElement(\"div\",{className:\"menu\"},React.createElement(Header,{tagline:\"Fresh Seafood Market\"}),React.createElement(\"ul\",{className:\"fishes\"},Object.keys(this.state.fishes).map(function(key){return React.createElement(Fish,{key:key,index:key,details:_this2.state.fishes[key],addToOrder:_this2.addToOrder});}))),React.createElement(Order,{fishes:this.state.fishes,order:this.state.order,removeFromOrder:this.removeFromOrder}),React.createElement(Inventory,{visible:this.state.visible,addFish:this.addFish,updateFish:this.updateFish,deleteFish:this.deleteFish,loadSampleFishes:this.loadSampleFishes,fishes:this.state.fishes,storeId:this.props.match.params.storeId})));}}]);return App;}(React.Component);App.transitionOptions={classNames:\"fish-edit\",timeout:{enter:500,exit:500}};export default App;","map":{"version":3,"sources":["/Users/alyssabartuch/Development/yarn-shop/catch-of-the-day/src/components/App.js"],"names":["React","Header","Inventory","Order","sampleFishes","Fish","base","App","state","fishes","order","visible","addFish","fish","Date","now","setState","updateFish","key","updatedFish","deleteFish","loadSampleFishes","addToOrder","removeFromOrder","handleClick","prev","params","props","match","localStorageRef","localStorage","getItem","storeId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component","transitionOptions","classNames","timeout","enter","exit"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from './Header';\nimport Inventory from './Inventory';\nimport Order from './Order';\nimport sampleFishes from '../sample-fishes'\nimport Fish from './Fish';\nimport base from '../base';\n\nclass App extends React.Component {\n    state = {\n        fishes: {},\n        order: {},\n        visible: true\n    };\n\n    static propTypes = { \n        match: PropTypes.object\n    }\n\n    static transitionOptions = {\n        classNames: \"fish-edit\",\n        timeout: { enter: 500, exit: 500 }\n    }\n\n    componentDidMount() {\n        const { params } = this.props.match;\n        // first reinstate localStorage\n        const localStorageRef = localStorage.getItem(params.storeId)\n        if (localStorageRef) {\n            this.setState({ order: JSON.parse(localStorageRef) })\n        }\n        this.ref = base.syncState(`${params.storeId}/fishes`, {\n            context: this,\n            state: 'fishes'\n        });\n    }\n    componentDidUpdate() {\n        localStorage.setItem(this.props.match.params.storeId, JSON.stringify(this.state.order));\n    }\n\n    componentWillUnmount() {\n        base.removeBinding(this.ref);        \n    }\n\n    addFish = (fish) => {\n        // 1. take a copy of existing state \n        const fishes = {...this.state.fishes};\n        // 2. add new fish to fishes var\n        fishes[`fish${Date.now()}`] = fish;\n        // 3. set the new fishes object to state\n        this.setState({ fishes });\n        // this.setState({\n        //     fishes: fishes\n        // });\n    } \n\n    updateFish = (key, updatedFish) => {\n        const fishes = {...this.state.fishes};\n        fishes[key] = updatedFish;\n        this.setState({ fishes })\n    }\n\n    deleteFish = (key) => {\n        // 1. take a copy of existing state\n        const fishes = {...this.state.fishes};\n        // 2. set fish to null to delete (firebase)\n        fishes[key] = null;\n        // 3. update state\n        this.setState({ fishes });\n\n    }\n\n    loadSampleFishes = () => {\n        this.setState({ fishes: sampleFishes });\n    }\n    \n    addToOrder = (key) => {\n        // 1. take a copy of existing state\n        const order = {...this.state.order};\n        // 2. either add to order or update the order qty\n        order[key] = order[key] + 1 || 1;\n        // 3. call set state\n        this.setState({ order });\n    }\n\n    removeFromOrder = (key) => {\n        const order = {...this.state.order};\n        delete order[key];\n        this.setState({ order });\n    }\n\n    handleClick = () => {\n        this.setState(prev => ({ visible: !prev.visible }))\n    }\n\n    render() {        \n        return (\n            <>\n                <button type=\"button\" className=\"admin-panel-btn\" onClick={this.handleClick}>Admin Pannel</button>\n\n                <div className=\"catch-of-the-day\">\n                    <div className=\"menu\">\n                        <Header tagline=\"Fresh Seafood Market\"/>\n                        <ul className=\"fishes\">\n                            {Object.keys(this.state.fishes).map(key => (\n                                <Fish \n                                    key={key} \n                                    index={key}\n                                    details={this.state.fishes[key]} \n                                    addToOrder={this.addToOrder} \n                                />\n                            ))}\n                        </ul>\n                    </div>\n                    <Order \n                        fishes={this.state.fishes} \n                        order={this.state.order}\n                        removeFromOrder={this.removeFromOrder}\n                    />\n                    <Inventory \n                        visible={this.state.visible}\n                        addFish={this.addFish} \n                        updateFish={this.updateFish}\n                        deleteFish={this.deleteFish}\n                        loadSampleFishes={this.loadSampleFishes} \n                        fishes={this.state.fishes}\n                        storeId={this.props.match.params.storeId}\n                    />\n\n                    \n\n                </div>\n            </>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}