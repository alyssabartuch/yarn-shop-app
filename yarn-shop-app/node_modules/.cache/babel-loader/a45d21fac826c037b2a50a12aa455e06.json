{"ast":null,"code":"(function webpackUniversalModuleDefinition(root, factory) {\n  if (typeof exports === 'object' && typeof module === 'object') module.exports = factory(require(\"firebase/app\"));else if (typeof define === 'function' && define.amd) define([\"firebase/app\"], factory);else {\n    var a = typeof exports === 'object' ? factory(require(\"firebase/app\")) : factory(root[\"firebase/app\"]);\n\n    for (var i in a) {\n      (typeof exports === 'object' ? exports : root)[i] = a[i];\n    }\n  }\n})(this, function (__WEBPACK_EXTERNAL_MODULE_6__) {\n  return (\n    /******/\n    function (modules) {\n      // webpackBootstrap\n\n      /******/\n      // The module cache\n\n      /******/\n      var installedModules = {};\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        if (installedModules[moduleId])\n          /******/\n          return installedModules[moduleId].exports;\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n        var module = installedModules[moduleId] = {\n          /******/\n          exports: {},\n\n          /******/\n          id: moduleId,\n\n          /******/\n          loaded: false\n          /******/\n\n        };\n        /******/\n        // Execute the module function\n\n        /******/\n\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n        // Flag the module as loaded\n\n        /******/\n\n        module.loaded = true;\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n        return module.exports;\n        /******/\n      }\n      /******/\n      // expose the modules object (__webpack_modules__)\n\n      /******/\n\n\n      __webpack_require__.m = modules;\n      /******/\n      // expose the module cache\n\n      /******/\n\n      __webpack_require__.c = installedModules;\n      /******/\n      // __webpack_public_path__\n\n      /******/\n\n      __webpack_require__.p = \"\";\n      /******/\n      // Load entry module and return exports\n\n      /******/\n\n      return __webpack_require__(0);\n      /******/\n    }(\n    /************************************************************************/\n\n    /******/\n    [\n    /* 0 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      module.exports = __webpack_require__(1);\n      /***/\n    },\n    /* 1 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      var _utils = __webpack_require__(2);\n\n      var _validators = __webpack_require__(5);\n\n      var _app = __webpack_require__(6);\n\n      var _app2 = _interopRequireDefault(_app);\n\n      var _push2 = __webpack_require__(7);\n\n      var _push3 = _interopRequireDefault(_push2);\n\n      var _fetch2 = __webpack_require__(8);\n\n      var _fetch3 = _interopRequireDefault(_fetch2);\n\n      var _post2 = __webpack_require__(9);\n\n      var _post3 = _interopRequireDefault(_post2);\n\n      var _sync2 = __webpack_require__(10);\n\n      var _sync3 = _interopRequireDefault(_sync2);\n\n      var _bind2 = __webpack_require__(11);\n\n      var _bind3 = _interopRequireDefault(_bind2);\n\n      var _update2 = __webpack_require__(12);\n\n      var _update3 = _interopRequireDefault(_update2);\n\n      var _reset2 = __webpack_require__(13);\n\n      var _reset3 = _interopRequireDefault(_reset2);\n\n      var _removeBinding2 = __webpack_require__(3);\n\n      var _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n      var _remove2 = __webpack_require__(14);\n\n      var _remove3 = _interopRequireDefault(_remove2);\n\n      var _fsSync2 = __webpack_require__(15);\n\n      var _fsSync3 = _interopRequireDefault(_fsSync2);\n\n      var _fsRemoveBinding2 = __webpack_require__(4);\n\n      var _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n      var _fsBind2 = __webpack_require__(16);\n\n      var _fsBind3 = _interopRequireDefault(_fsBind2);\n\n      var _fsGet2 = __webpack_require__(17);\n\n      var _fsGet3 = _interopRequireDefault(_fsGet2);\n\n      var _fsRemoveDoc2 = __webpack_require__(18);\n\n      var _fsRemoveDoc3 = _interopRequireDefault(_fsRemoveDoc2);\n\n      var _fsAddToCollection2 = __webpack_require__(19);\n\n      var _fsAddToCollection3 = _interopRequireDefault(_fsAddToCollection2);\n\n      var _fsRemoveFromCollection2 = __webpack_require__(20);\n\n      var _fsRemoveFromCollection3 = _interopRequireDefault(_fsRemoveFromCollection2);\n\n      var _fsUpdateDoc2 = __webpack_require__(21);\n\n      var _fsUpdateDoc3 = _interopRequireDefault(_fsUpdateDoc2);\n\n      var _fsReset2 = __webpack_require__(22);\n\n      var _fsReset3 = _interopRequireDefault(_fsReset2);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          default: obj\n        };\n      } //database\n\n\n      module.exports = function () {\n        function init(db) {\n          return function () {\n            var refs = new Map();\n            var listeners = new Map();\n            var syncs = new WeakMap();\n\n            if (typeof db.ref === 'function') {\n              var rebase = {\n                initializedApp: db.app,\n                timestamp: _app2.default.database.ServerValue.TIMESTAMP,\n                listenTo: function listenTo(endpoint, options) {\n                  return _bind3.default.call(this, endpoint, options, 'listenTo', {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                },\n                bindToState: function bindToState(endpoint, options) {\n                  return _bind3.default.call(this, endpoint, options, 'bindToState', {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners\n                  });\n                },\n                syncState: function syncState(endpoint, options) {\n                  return _sync3.default.call(this, endpoint, options, {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                },\n                fetch: function fetch(endpoint, options) {\n                  return (0, _fetch3.default)(endpoint, options, db);\n                },\n                post: function post(endpoint, options) {\n                  return (0, _post3.default)(endpoint, options, db);\n                },\n                update: function update(endpoint, options) {\n                  return (0, _update3.default)(endpoint, options, {\n                    db: db\n                  });\n                },\n                push: function push(endpoint, options) {\n                  return (0, _push3.default)(endpoint, options, db);\n                },\n                removeBinding: function removeBinding(binding) {\n                  (0, _removeBinding3.default)(binding, {\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                },\n                remove: function remove(endpoint, fn) {\n                  return (0, _remove3.default)(endpoint, db, fn);\n                },\n                reset: function reset() {\n                  return (0, _reset3.default)({\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                }\n              };\n            } else {\n              var rebase = {\n                initializedApp: db.app,\n                timestamp: _app2.default.firestore.FieldValue.serverTimestamp(),\n                bindDoc: function bindDoc(path, options) {\n                  return _fsBind3.default.call(this, path, options, 'bindDoc', {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners\n                  });\n                },\n                bindCollection: function bindCollection(path, options) {\n                  return _fsBind3.default.call(this, path, options, 'bindCollection', {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners\n                  });\n                },\n                syncDoc: function syncDoc(doc, options) {\n                  return _fsSync3.default.call(this, doc, options, {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                },\n                listenToDoc: function listenToDoc(doc, options) {\n                  return _fsBind3.default.call(this, doc, options, 'listenToDoc', {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners\n                  });\n                },\n                listenToCollection: function listenToCollection(path, options) {\n                  return _fsBind3.default.call(this, path, options, 'listenToCollection', {\n                    db: db,\n                    refs: refs,\n                    listeners: listeners\n                  });\n                },\n                addToCollection: function addToCollection(path, doc, key) {\n                  return _fsAddToCollection3.default.call(this, path, doc, db, key);\n                },\n                updateDoc: function updateDoc(path, doc, options) {\n                  return _fsUpdateDoc3.default.call(this, path, doc, db);\n                },\n                get: function get(path, options) {\n                  return _fsGet3.default.call(this, path, options, db);\n                },\n                removeDoc: function removeDoc(path) {\n                  return (0, _fsRemoveDoc3.default)(path, db);\n                },\n                removeFromCollection: function removeFromCollection(path, options) {\n                  return (0, _fsRemoveFromCollection3.default)(path, db, options);\n                },\n                removeBinding: function removeBinding(binding) {\n                  (0, _fsRemoveBinding3.default)(binding, {\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                },\n                reset: function reset() {\n                  return (0, _fsReset3.default)({\n                    refs: refs,\n                    listeners: listeners,\n                    syncs: syncs\n                  });\n                }\n              };\n            }\n\n            return rebase;\n          }();\n        }\n\n        return {\n          createClass: function createClass(db) {\n            (0, _validators._validateDatabase)(db);\n            return init(db);\n          }\n        };\n      }(); //firestore\n      //helpers\n\n      /***/\n\n    },\n    /* 2 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports._fsCreateRef = exports._fsSetUnmountHandler = exports._setData = exports._handleError = exports._createNestedObject = exports._setUnmountHandler = exports._addFirestoreListener = exports._addListener = exports._fsUpdateSyncState = exports._updateSyncState = exports._firebaseRefsMixin = exports._addSync = exports._hasOwnNestedProperty = exports._getSegmentCount = exports._getNestedObject = exports._isNestedPath = exports._isObject = exports._isValid = exports._toArray = exports._fsPrepareData = exports._prepareData = exports._throwError = exports._setState = exports._returnRef = exports._addFirestoreQuery = exports._addQueries = exports._createHash = undefined;\n\n      var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n\n      var _removeBinding2 = __webpack_require__(3);\n\n      var _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n      var _fsRemoveBinding2 = __webpack_require__(4);\n\n      var _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n      function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n          default: obj\n        };\n      }\n\n      function _defineProperty(obj, key, value) {\n        if (key in obj) {\n          Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n          });\n        } else {\n          obj[key] = value;\n        }\n\n        return obj;\n      }\n\n      var _isObject = function _isObject(obj) {\n        return Object.prototype.toString.call(obj) === '[object Object]' ? true : false;\n      };\n\n      var _toArray = function _toArray(snapshot) {\n        var arr = [];\n        snapshot.forEach(function (childSnapshot) {\n          var val = childSnapshot.val();\n\n          if (_isObject(val)) {\n            val.key = childSnapshot.key;\n          }\n\n          arr.push(val);\n        });\n        return arr;\n      };\n\n      var _isValid = function _isValid(value) {\n        return typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean' || (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' ? true : false;\n      };\n\n      var _isNestedPath = function _isNestedPath(path) {\n        return path.split('.').length > 1 ? true : false;\n      };\n\n      var _createNestedObject = function _createNestedObject(path, value) {\n        var obj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        var keys = path.split('.');\n        var lastKey = value === undefined ? false : keys.pop();\n        var root = obj;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = keys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var key = _step.value;\n            obj = obj[key] = obj[key] || {};\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (lastKey) obj[lastKey] = value;\n        return root;\n      };\n\n      var _getNestedObject = function _getNestedObject(obj, path) {\n        if (_isNestedPath(path) === false) return;\n        var keys = path.split('.');\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var key = _step2.value;\n            if (!obj || (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') return;\n            obj = obj[key];\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        return obj;\n      };\n\n      var _hasOwnNestedProperty = function _hasOwnNestedProperty(obj, path) {\n        return _getNestedObject(obj, path) === undefined ? false : true;\n      };\n\n      var _prepareData = function _prepareData(snapshot) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var defaultValue = options.defaultValue,\n            asArray = options.asArray;\n        var data = snapshot.val();\n        if (data === null && _isValid(defaultValue)) return defaultValue;\n        if (asArray === true) return _toArray(snapshot);\n        return data === null ? {} : data;\n      };\n\n      var _addSync = function _addSync(context, sync, syncs) {\n        var existingSyncs = syncs.get(context) || [];\n        existingSyncs.push(sync);\n        syncs.set(context, existingSyncs);\n      };\n\n      var _throwError = function _throwError(msg, code) {\n        var err = new Error('REBASE: ' + msg);\n        err.code = code;\n        throw err;\n      };\n\n      var _setState = function _setState(newState) {\n        this.setState(newState);\n      };\n\n      var _returnRef = function _returnRef(endpoint, method, id, context) {\n        return {\n          endpoint: endpoint,\n          method: method,\n          id: id,\n          context: context\n        };\n      };\n\n      var _addQueries = function _addQueries(ref, queries) {\n        var needArgs = {\n          limitToFirst: true,\n          limitToLast: true,\n          orderByChild: true,\n          startAt: true,\n          endAt: true,\n          equalTo: true\n        };\n\n        for (var key in queries) {\n          /* istanbul ignore else */\n          if (queries.hasOwnProperty(key)) {\n            if (needArgs[key]) {\n              ref = ref[key](queries[key]);\n            } else {\n              ref = ref[key]();\n            }\n          }\n        }\n\n        return ref;\n      };\n\n      var _addFirestoreQuery = function _addFirestoreQuery(ref, query) {\n        if (query) {\n          return query(ref);\n        }\n\n        return ref;\n      };\n\n      var _createHash = function _createHash(endpoint, invoker) {\n        var hash = 0;\n        var str = endpoint + invoker + Math.random();\n\n        for (var i = 0; i < str.length; i++) {\n          var char = str.charCodeAt(i);\n          hash = (hash << 5) - hash + char;\n          hash = hash & hash;\n        }\n\n        return hash;\n      };\n\n      var _firebaseRefsMixin = function _firebaseRefsMixin(id, ref, refs) {\n        refs.set(id, ref);\n      };\n\n      var _handleError = function _handleError(onFailure, err) {\n        if (err && typeof onFailure === 'function') {\n          onFailure(err);\n        }\n      };\n\n      var _setUnmountHandler = function _setUnmountHandler(context, id, refs, listeners, syncs) {\n        var removeListeners = function removeListeners() {\n          (0, _removeBinding3.default)({\n            context: context,\n            id: id\n          }, {\n            refs: refs,\n            listeners: listeners,\n            syncs: syncs\n          });\n        };\n\n        if (typeof context.componentWillUnmount === 'function') {\n          var unmount = context.componentWillUnmount;\n        }\n\n        context.componentWillUnmount = function () {\n          removeListeners();\n          if (unmount) unmount.call(context);\n        };\n      };\n\n      var _fsSetUnmountHandler = function _fsSetUnmountHandler(context, id, refs, listeners, syncs) {\n        var removeListeners = function removeListeners() {\n          (0, _fsRemoveBinding3.default)({\n            context: context,\n            id: id\n          }, {\n            refs: refs,\n            listeners: listeners,\n            syncs: syncs\n          });\n        };\n\n        if (typeof context.componentWillUnmount === 'function') {\n          var unmount = context.componentWillUnmount;\n        }\n\n        context.componentWillUnmount = function () {\n          removeListeners();\n          if (unmount) unmount.call(context);\n        };\n      };\n\n      var _setData = function _setData(ref, data, handleError, keepKeys) {\n        if (Array.isArray(data) && keepKeys) {\n          var shouldConvertToObject = data.reduce(function (acc, curr) {\n            return acc ? acc : _isObject(curr) && curr.hasOwnProperty('key');\n          }, false);\n\n          if (shouldConvertToObject) {\n            data = data.reduce(function (acc, item) {\n              acc[item.key] = item;\n              return acc;\n            }, {});\n          }\n        }\n\n        ref.set(data, handleError);\n      };\n\n      var _updateSyncState = function _updateSyncState(ref, onFailure, keepKeys, data) {\n        if (_isObject(data)) {\n          for (var prop in data) {\n            //allow timestamps to be set\n            if (prop !== '.sv') {\n              _updateSyncState(ref.child(prop), onFailure, keepKeys, data[prop]);\n            } else {\n              _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n            }\n          }\n        } else {\n          _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n        }\n      };\n\n      var _fsUpdateSyncState = function _fsUpdateSyncState(ref, data) {\n        ref.set(data);\n      };\n\n      var _addListener = function _addListener(id, invoker, options, ref, listeners) {\n        ref = _addQueries(ref, options.queries);\n        var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : null;\n        listeners.set(id, ref.on('value', function (snapshot) {\n          var data = _prepareData(snapshot, options);\n\n          if (invoker === 'listenTo') {\n            options.then.call(options.context, data);\n          } else {\n            var newState = _defineProperty({}, options.state, data);\n\n            if (_isNestedPath(options.state)) {\n              var root = options.state.split('.')[0]; // Merge the previous state with the new one\n\n              var prevState = _defineProperty({}, root, options.context.state[root]);\n\n              newState = _createNestedObject(options.state, data, prevState);\n            }\n\n            if (invoker === 'syncState') {\n              options.reactSetState.call(options.context, newState);\n\n              if (options.then && options.then.called === false) {\n                options.then.call(options.context);\n                options.then.called = true;\n              }\n            } else if (invoker === 'bindToState') {\n              _setState.call(options.context, newState);\n\n              if (options.then && options.then.called === false) {\n                options.then.call(options.context);\n                options.then.called = true;\n              }\n            }\n          }\n        }, boundOnFailure));\n      };\n\n      var _addFirestoreListener = function _addFirestoreListener(id, invoker, options, ref, listeners) {\n        ref = _addFirestoreQuery(ref, options.query);\n        var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : undefined;\n        listeners.set(id, ref.onSnapshot(function (snapshot) {\n          if (invoker.match(/^listenTo/)) {\n            if (invoker === 'listenToDoc') {\n              var newState = _fsPrepareData(snapshot, options);\n\n              return options.then.call(options.context, newState);\n            }\n\n            if (invoker === 'listenToCollection') {\n              var _newState2 = _fsPrepareData(snapshot, options, true);\n\n              return options.then.call(options.context, _newState2);\n            }\n          } else {\n            if (invoker === 'syncDoc') {\n              var _newState3 = _fsPrepareData(snapshot, options);\n\n              options.reactSetState.call(options.context, function (currentState) {\n                return Object.assign(currentState, _newState3);\n              });\n            } else if (invoker === 'bindDoc') {\n              var _newState4 = _fsPrepareData(snapshot, options);\n\n              _setState.call(options.context, function (currentState) {\n                return Object.assign(currentState, _newState4);\n              });\n            } else if (invoker === 'bindCollection') {\n              var _newState5 = _fsPrepareData(snapshot, options, true);\n\n              _setState.call(options.context, function (currentState) {\n                return Object.assign(currentState, _newState5);\n              });\n            }\n\n            if (options.then && options.then.called === false) {\n              options.then.call(options.context);\n              options.then.called = true;\n            }\n          }\n        }, boundOnFailure));\n      };\n\n      var _getSegmentCount = function _getSegmentCount(path) {\n        return path.match(/^\\//) ? path.split('/').slice(1).length : path.split('/').length;\n      };\n\n      var _fsPrepareData = function _fsPrepareData(snapshot, options) {\n        var isCollection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var meta = {};\n\n        if (!isCollection) {\n          var data = {};\n\n          if (snapshot.exists) {\n            if (options.withRefs) meta.ref = snapshot.ref;\n            if (options.withIds) meta.id = snapshot.id;\n            data = snapshot.data();\n          } else {\n            data = {};\n          }\n\n          return options.state ? _defineProperty({}, options.state, Object.assign({}, data, meta)) : Object.assign({}, data, meta);\n        }\n\n        var collection = [];\n\n        if (!snapshot.empty) {\n          snapshot.forEach(function (doc) {\n            if (options.withRefs) meta.ref = doc.ref;\n            if (options.withIds) meta.id = doc.id;\n            collection.push(Object.assign({}, doc.data(), meta));\n          });\n        }\n\n        return options.state ? _defineProperty({}, options.state, collection) : collection;\n      };\n\n      var _fsCreateRef = function _fsCreateRef(pathOrRef, db) {\n        if ((typeof pathOrRef === 'undefined' ? 'undefined' : _typeof(pathOrRef)) === 'object') {\n          return pathOrRef;\n        }\n\n        var segmentCount = _getSegmentCount(pathOrRef);\n\n        var ref;\n\n        if (segmentCount % 2 === 0) {\n          ref = db.doc(pathOrRef);\n        } else {\n          ref = db.collection(pathOrRef);\n        }\n\n        return ref;\n      };\n\n      exports._createHash = _createHash;\n      exports._addQueries = _addQueries;\n      exports._addFirestoreQuery = _addFirestoreQuery;\n      exports._returnRef = _returnRef;\n      exports._setState = _setState;\n      exports._throwError = _throwError;\n      exports._prepareData = _prepareData;\n      exports._fsPrepareData = _fsPrepareData;\n      exports._toArray = _toArray;\n      exports._isValid = _isValid;\n      exports._isObject = _isObject;\n      exports._isNestedPath = _isNestedPath;\n      exports._getNestedObject = _getNestedObject;\n      exports._getSegmentCount = _getSegmentCount;\n      exports._hasOwnNestedProperty = _hasOwnNestedProperty;\n      exports._addSync = _addSync;\n      exports._firebaseRefsMixin = _firebaseRefsMixin;\n      exports._updateSyncState = _updateSyncState;\n      exports._fsUpdateSyncState = _fsUpdateSyncState;\n      exports._addListener = _addListener;\n      exports._addFirestoreListener = _addFirestoreListener;\n      exports._setUnmountHandler = _setUnmountHandler;\n      exports._createNestedObject = _createNestedObject;\n      exports._handleError = _handleError;\n      exports._setData = _setData;\n      exports._fsSetUnmountHandler = _fsSetUnmountHandler;\n      exports._fsCreateRef = _fsCreateRef;\n      /***/\n    },\n    /* 3 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _removeBinding;\n\n      var _utils = __webpack_require__(2);\n\n      function _removeBinding(_ref, _ref2) {\n        var id = _ref.id,\n            context = _ref.context;\n        var refs = _ref2.refs,\n            listeners = _ref2.listeners,\n            syncs = _ref2.syncs;\n        var ref = refs.get(id);\n        var listener = listeners.get(id);\n\n        if (typeof ref !== 'undefined') {\n          ref.off('value', listener);\n          refs.delete(id);\n          listeners.delete(id);\n\n          if (syncs) {\n            var currentSyncs = syncs.get(context);\n\n            if (currentSyncs && currentSyncs.length > 0) {\n              var idx = currentSyncs.findIndex(function (item, index) {\n                return item.id === id;\n              });\n              /*istanbul ignore else */\n\n              if (idx !== -1) {\n                currentSyncs.splice(idx, 1);\n                syncs.set(context, currentSyncs);\n              }\n            }\n          }\n        }\n      }\n      /***/\n\n    },\n    /* 4 */\n\n    /***/\n    function (module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsRemoveBinding;\n\n      function _fsRemoveBinding(_ref, _ref2) {\n        var id = _ref.id,\n            context = _ref.context;\n        var refs = _ref2.refs,\n            listeners = _ref2.listeners,\n            syncs = _ref2.syncs;\n        var unsubscribe = listeners.get(id);\n\n        if (typeof unsubscribe === 'function') {\n          unsubscribe();\n          refs.delete(id);\n          listeners.delete(id);\n\n          if (syncs) {\n            var currentSyncs = syncs.get(context);\n\n            if (currentSyncs && currentSyncs.length > 0) {\n              var idx = currentSyncs.findIndex(function (item, index) {\n                return item.id === id;\n              });\n              /*istanbul ignore else */\n\n              if (idx !== -1) {\n                currentSyncs.splice(idx, 1);\n                syncs.set(context, currentSyncs);\n              }\n            }\n          }\n        }\n      }\n      /***/\n\n    },\n    /* 5 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports._validateCollectionPath = exports._validateDocumentPath = exports._validateEndpoint = exports._validateDatabase = exports.optionValidators = undefined;\n\n      var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n\n      var _utils = __webpack_require__(2);\n\n      var optionValidators = {\n        notObject: function notObject(options) {\n          if (!(0, _utils._isObject)(options)) {\n            (0, _utils._throwError)('The options argument must be an object. Instead, got ' + options, 'INVALID_OPTIONS');\n          }\n        },\n        context: function context(options) {\n          this.notObject(options);\n\n          if (!options.context || !(0, _utils._isObject)(options.context)) {\n            this.makeError('context', 'object', options.context);\n          }\n        },\n        state: function state(options) {\n          this.notObject(options);\n\n          if (!options.state || typeof options.state !== 'string') {\n            this.makeError('state', 'string', options.state);\n          }\n        },\n        then: function then(options) {\n          this.notObject(options);\n\n          if (typeof options.then === 'undefined' || typeof options.then !== 'function') {\n            this.makeError('then', 'function', options.then);\n          }\n        },\n        data: function data(options) {\n          this.notObject(options);\n\n          if (typeof options.data === 'undefined') {\n            this.makeError('data', 'ANY', options.data);\n          }\n        },\n        query: function query(options) {\n          this.notObject(options);\n          var validQueries = ['limitToFirst', 'limitToLast', 'orderByChild', 'orderByValue', 'orderByKey', 'orderByPriority', 'startAt', 'endAt', 'equalTo'];\n          var queries = options.queries;\n\n          for (var key in queries) {\n            if (queries.hasOwnProperty(key) && validQueries.indexOf(key) === -1) {\n              (0, _utils._throwError)('The query field must contain valid Firebase queries.  Expected one of [' + validQueries.join(', ') + ']. Instead, got ' + key, 'INVALID_OPTIONS');\n            }\n          }\n        },\n        defaultValue: function defaultValue(options) {\n          this.notObject(options);\n\n          if (options.hasOwnProperty('defaultValue')) {\n            if (!(0, _utils._isValid)(options.defaultValue)) {\n              (0, _utils._throwError)('The typeof defaultValue must be one of string, number, boolean, object.', 'INVALID_OPTIONS');\n            }\n          }\n        },\n        makeError: function makeError(prop, type, actual) {\n          (0, _utils._throwError)('The options argument must contain a ' + prop + ' property of type ' + type + '. Instead, got ' + actual, 'INVALID_OPTIONS');\n        }\n      };\n\n      var _validateEndpoint = function _validateEndpoint(endpoint) {\n        if ((typeof endpoint === 'undefined' ? 'undefined' : _typeof(endpoint)) === 'object') {\n          if (endpoint.hasOwnProperty('firestore')) {\n            return;\n          }\n        }\n\n        var defaultError = 'The Firebase endpoint you are trying to listen to';\n        var errorMsg;\n\n        if (typeof endpoint !== 'string') {\n          errorMsg = defaultError + ' must be a string. Instead, got ' + endpoint;\n        } else if (endpoint.length === 0) {\n          errorMsg = defaultError + ' must be a non-empty string. Instead, got ' + endpoint;\n        } else if (endpoint.length > 768) {\n          errorMsg = defaultError + ' is too long to be stored in Firebase. It must be less than 768 characters.';\n        } else if (/^$|[\\[\\]\\#\\$]|.{1}[\\.]/.test(endpoint)) {\n          errorMsg = defaultError + ' in invalid. Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".';\n        }\n\n        if (typeof errorMsg !== 'undefined') {\n          (0, _utils._throwError)(errorMsg, 'INVALID_ENDPOINT');\n        }\n      };\n\n      var _validateDatabase = function _validateDatabase(db) {\n        var defaultError = 'Rebase.createClass failed.';\n        var errorMsg;\n\n        if ((typeof db === 'undefined' ? 'undefined' : _typeof(db)) !== 'object' || !db.ref && !db.collection) {\n          errorMsg = defaultError + ' Expected an initialized firebase or firestore database object.';\n        }\n\n        if (typeof errorMsg !== 'undefined') {\n          (0, _utils._throwError)(errorMsg, 'INVALID_CONFIG');\n        }\n      };\n\n      var _validateDocumentPath = function _validateDocumentPath(path) {\n        if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.hasOwnProperty('firestore')) return;\n        var defaultError = 'Invalid document path or reference.';\n        if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n        var segmentCount = (0, _utils._getSegmentCount)(path);\n        if (segmentCount % 2 !== 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n      };\n\n      var _validateCollectionPath = function _validateCollectionPath(path) {\n        if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.hasOwnProperty('firestore')) return;\n        var defaultError = 'Invalid collection path or reference.';\n        if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n        var segmentCount = (0, _utils._getSegmentCount)(path);\n        if (segmentCount % 2 === 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n      };\n\n      exports.optionValidators = optionValidators;\n      exports._validateDatabase = _validateDatabase;\n      exports._validateEndpoint = _validateEndpoint;\n      exports._validateDocumentPath = _validateDocumentPath;\n      exports._validateCollectionPath = _validateCollectionPath;\n      /***/\n    },\n    /* 6 */\n\n    /***/\n    function (module, exports) {\n      module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n      /***/\n    },\n    /* 7 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _push;\n\n      var _validators = __webpack_require__(5);\n\n      function _push(endpoint, options, db) {\n        (0, _validators._validateEndpoint)(endpoint);\n\n        _validators.optionValidators.data(options);\n\n        var ref = db.ref(endpoint);\n        var returnEndpoint;\n\n        if (options.then) {\n          returnEndpoint = ref.push(options.data, options.then);\n        } else {\n          returnEndpoint = ref.push(options.data);\n        }\n\n        return returnEndpoint;\n      }\n      /***/\n\n    },\n    /* 8 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fetch;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _fetch(endpoint, options, db) {\n        (0, _validators._validateEndpoint)(endpoint);\n\n        _validators.optionValidators.defaultValue(options);\n\n        options.queries && _validators.optionValidators.query(options);\n        var ref = db.ref(endpoint);\n        ref = (0, _utils._addQueries)(ref, options.queries);\n        return ref.once('value').then(function (snapshot) {\n          var data = (0, _utils._prepareData)(snapshot, options);\n\n          if (options.then) {\n            options.then.call(options.context, data);\n          }\n\n          return data;\n        }).catch(function (err) {\n          //call onFailure callback if it exists otherwise rethrow error\n          if (options.onFailure && typeof options.onFailure === 'function') {\n            options.onFailure.call(options.context, err);\n          } else {\n            throw err;\n          }\n        });\n      }\n      /***/\n\n    },\n    /* 9 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _post;\n\n      var _validators = __webpack_require__(5);\n\n      function _post(endpoint, options, db) {\n        (0, _validators._validateEndpoint)(endpoint);\n\n        _validators.optionValidators.data(options);\n\n        var ref = db.ref(endpoint);\n\n        if (options.then) {\n          return ref.set(options.data, options.then);\n        } else {\n          return ref.set(options.data);\n        }\n      }\n      /***/\n\n    },\n    /* 10 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _sync;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _sync(endpoint, options, state) {\n        (0, _validators._validateEndpoint)(endpoint);\n\n        _validators.optionValidators.context(options);\n\n        _validators.optionValidators.state(options);\n\n        _validators.optionValidators.defaultValue(options);\n\n        options.queries && _validators.optionValidators.query(options);\n        options.then && (options.then.called = false);\n        options.onFailure = options.onFailure ? options.onFailure.bind(options.context) : null;\n        options.keepKeys = options.keepKeys && options.asArray; //store reference to react's setState\n\n        if (_sync.called !== true) {\n          _sync.reactSetState = options.context.setState;\n          _sync.called = true;\n        }\n\n        options.reactSetState = _sync.reactSetState;\n        var ref = state.db.ref(endpoint);\n        var id = (0, _utils._createHash)(endpoint, 'syncState');\n        (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n        (0, _utils._addListener)(id, 'syncState', options, ref, state.listeners);\n        (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n        var sync = {\n          id: id,\n          updateFirebase: _utils._updateSyncState.bind(null, ref, options.onFailure, options.keepKeys),\n          stateKey: options.state\n        };\n        (0, _utils._addSync)(options.context, sync, state.syncs);\n\n        options.context.setState = function (data, cb) {\n          //if setState is a function, call it first before syncing to fb\n          if (typeof data === 'function') {\n            return _sync.reactSetState.call(options.context, data, function () {\n              if (cb) cb.call(options.context);\n              return options.context.setState.call(options.context, options.context.state);\n            });\n          } //if callback is supplied, call setState first before syncing to fb\n\n\n          if (typeof cb === 'function') {\n            return _sync.reactSetState.call(options.context, data, function () {\n              cb();\n              return options.context.setState.call(options.context, data);\n            });\n          }\n\n          var syncsToCall = state.syncs.get(this); //if sync does not exist, call original Component.setState\n\n          if (!syncsToCall || syncsToCall.length === 0) {\n            return _sync.reactSetState.call(this, data, cb);\n          }\n\n          var syncedKeys = syncsToCall.map(function (sync) {\n            return {\n              key: sync.stateKey,\n              update: sync.updateFirebase,\n              nested: (0, _utils._isNestedPath)(sync.stateKey)\n            };\n          });\n          syncedKeys.forEach(function (syncedKey) {\n            if (syncedKey.nested === true) {\n              if ((0, _utils._hasOwnNestedProperty)(data, syncedKey.key)) {\n                var datum = (0, _utils._getNestedObject)(data, syncedKey.key);\n                syncedKey.update(datum);\n              }\n            } else if (data.hasOwnProperty(syncedKey.key)) {\n              syncedKey.update(data[syncedKey.key]);\n            }\n          });\n          var allKeys = Object.keys(data);\n          allKeys.forEach(function (key) {\n            var absent = !syncedKeys.find(function (syncedKey) {\n              var k = syncedKey.key;\n\n              if (syncedKey.nested === true) {\n                // Check with the root\n                k = syncedKey.key.split('.')[0];\n              }\n\n              return k === key;\n            });\n\n            if (absent) {\n              var update = {};\n              update[key] = data[key];\n\n              _sync.reactSetState.call(options.context, update, cb);\n            }\n          });\n        };\n\n        return (0, _utils._returnRef)(endpoint, 'syncState', id, options.context);\n      }\n      /***/\n\n    },\n    /* 11 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _bind;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _bind(endpoint, options, invoker, state) {\n        (0, _validators._validateEndpoint)(endpoint);\n\n        _validators.optionValidators.context(options);\n\n        _validators.optionValidators.defaultValue(options);\n\n        invoker === 'listenTo' && _validators.optionValidators.then(options);\n        invoker === 'bindToState' && _validators.optionValidators.state(options);\n        options.queries && _validators.optionValidators.query(options);\n        options.then && (options.then.called = false);\n        var id = (0, _utils._createHash)(endpoint, invoker);\n        var ref = state.db.ref(endpoint);\n        (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n        (0, _utils._addListener)(id, invoker, options, ref, state.listeners);\n        (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n        return (0, _utils._returnRef)(endpoint, invoker, id, options.context);\n      }\n      /***/\n\n    },\n    /* 12 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _update;\n\n      var _validators = __webpack_require__(5);\n\n      function _update(endpoint, options, state) {\n        (0, _validators._validateEndpoint)(endpoint);\n\n        _validators.optionValidators.data(options);\n\n        var ref = state.db.ref(endpoint);\n\n        if (options.then) {\n          return ref.update(options.data, options.then);\n        } else {\n          return ref.update(options.data);\n        }\n      }\n      /***/\n\n    },\n    /* 13 */\n\n    /***/\n    function (module, exports) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _reset;\n\n      function _reset(state) {\n        state.refs.forEach(function (ref, id) {\n          ref.off('value', state.listeners.get(id));\n        });\n        state.listeners = new Map();\n        state.refs = new Map();\n        state.syncs = new WeakMap();\n        return null;\n      }\n      /***/\n\n    },\n    /* 14 */\n\n    /***/\n    function (module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n\n      exports.default = function (endpoint, db, fn) {\n        return db.ref().child(endpoint).remove(fn);\n      };\n      /***/\n\n    },\n    /* 15 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsSync;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _fsSync(document, options, state) {\n        //validate arguments\n        (0, _validators._validateDocumentPath)(document);\n\n        _validators.optionValidators.context(options);\n\n        _validators.optionValidators.state(options);\n\n        options.then && (options.then.called = false); //store reference to react's setState\n\n        if (_fsSync.called !== true) {\n          _fsSync.reactSetState = options.context.setState;\n          _fsSync.called = true;\n        }\n\n        options.reactSetState = _fsSync.reactSetState;\n        var id = (0, _utils._createHash)(document, 'syncDoc');\n        var ref = (0, _utils._fsCreateRef)(document, state.db);\n        (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n        (0, _utils._addFirestoreListener)(id, 'syncDoc', options, ref, state.listeners);\n        (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n        var sync = {\n          id: id,\n          updateFirebase: _utils._fsUpdateSyncState.bind(null, ref),\n          stateKey: options.state\n        };\n        (0, _utils._addSync)(options.context, sync, state.syncs);\n\n        options.context.setState = function (data, cb) {\n          //if setState is a function, call it first before syncing to fb\n          if (typeof data === 'function') {\n            return _fsSync.reactSetState.call(options.context, data, function () {\n              if (cb) cb.call(options.context);\n              return options.context.setState.call(options.context, options.context.state);\n            });\n          } //if callback is supplied, call setState first before syncing to fb\n\n\n          if (typeof cb === 'function') {\n            return _fsSync.reactSetState.call(options.context, data, function () {\n              cb();\n              return options.context.setState.call(options.context, data);\n            });\n          }\n\n          var syncsToCall = state.syncs.get(this); //if sync does not exist, call original Component.setState\n\n          if (!syncsToCall || syncsToCall.length === 0) {\n            return _fsSync.reactSetState.call(this, data, cb);\n          } //send the update of synced keys to firestore\n\n\n          var syncedKeys = syncsToCall.map(function (sync) {\n            return {\n              key: sync.stateKey,\n              update: sync.updateFirebase\n            };\n          });\n          syncedKeys.forEach(function (syncedKey) {\n            if (data[syncedKey.key]) {\n              syncedKey.update(data[syncedKey.key]);\n            }\n          }); //send the update of all other keys through setState\n\n          var allKeys = Object.keys(data);\n          allKeys.forEach(function (key) {\n            var absent = !syncedKeys.find(function (syncedKey) {\n              return syncedKey.key === key;\n            });\n\n            if (absent) {\n              var update = {};\n              update[key] = data[key];\n\n              _fsSync.reactSetState.call(options.context, function (currentState) {\n                return Object.assign(currentState, update);\n              }, cb);\n            }\n          });\n        };\n\n        return (0, _utils._returnRef)(document, 'syncDoc', id, options.context);\n      }\n      /***/\n\n    },\n    /* 16 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsBind;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _fsBind(path, options, invoker, state) {\n        _validators.optionValidators.context(options);\n\n        options.then && (options.then.called = false);\n\n        if (invoker === 'bindDoc') {\n          (0, _validators._validateDocumentPath)(path);\n        }\n\n        if (invoker === 'bindCollection') {\n          _validators.optionValidators.state(options);\n\n          (0, _validators._validateCollectionPath)(path);\n        }\n\n        if (invoker === 'listenToDoc') {\n          (0, _validators._validateDocumentPath)(path);\n\n          _validators.optionValidators.then(options);\n        }\n\n        if (invoker === 'listenToCollection') {\n          (0, _validators._validateCollectionPath)(path);\n\n          _validators.optionValidators.then(options);\n        }\n\n        var ref = (0, _utils._fsCreateRef)(path, state.db);\n        var id = (0, _utils._createHash)(path, invoker);\n        (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n        (0, _utils._addFirestoreListener)(id, invoker, options, ref, state.listeners);\n        (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n        return (0, _utils._returnRef)(path, invoker, id, options.context);\n      }\n      /***/\n\n    },\n    /* 17 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsGet;\n\n      var _utils = __webpack_require__(2);\n\n      var _validators = __webpack_require__(5);\n\n      function _fsGet(endpoint) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var db = arguments[2];\n        (0, _validators._validateEndpoint)(endpoint);\n        var ref = (0, _utils._fsCreateRef)(endpoint, db); //check if ref is a collection\n\n        var isCollection = !!ref.add;\n        ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n        return ref.get().then(function (snapshot) {\n          if (isCollection && !snapshot.empty || !isCollection && snapshot.exists) {\n            return (0, _utils._fsPrepareData)(snapshot, options, isCollection);\n          } else {\n            return Promise.reject(new Error('No Result'));\n          }\n        });\n      }\n      /***/\n\n    },\n    /* 18 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsRemoveDoc;\n\n      var _utils = __webpack_require__(2);\n\n      function _fsRemoveDoc(path, db) {\n        var ref = (0, _utils._fsCreateRef)(path, db);\n        return ref.delete();\n      }\n      /***/\n\n    },\n    /* 19 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsAddToCollection;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _fsAddToCollection(path, doc, db, key) {\n        (0, _validators._validateCollectionPath)(path);\n        var ref = (0, _utils._fsCreateRef)(path, db);\n\n        if (key) {\n          return ref.doc(key).set(doc);\n        }\n\n        return ref.add(doc);\n      }\n      /***/\n\n    },\n    /* 20 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsRemoveFromCollection;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _fsRemoveFromCollection(path, db) {\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        (0, _validators._validateCollectionPath)(path);\n        var ref = (0, _utils._fsCreateRef)(path, db);\n        ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n        return ref.get().then(function (snapshot) {\n          if (!snapshot.empty) {\n            var batch = db.batch();\n            snapshot.forEach(function (doc) {\n              batch.delete(doc.ref);\n            });\n            return batch.commit();\n          }\n        });\n      }\n      /***/\n\n    },\n    /* 21 */\n\n    /***/\n    function (module, exports, __webpack_require__) {\n      'use strict';\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsUpdateDoc;\n\n      var _validators = __webpack_require__(5);\n\n      var _utils = __webpack_require__(2);\n\n      function _fsUpdateDoc(document, data, db) {\n        (0, _validators._validateDocumentPath)(document);\n        var ref = (0, _utils._fsCreateRef)(document, db);\n        return ref.update(data);\n      }\n      /***/\n\n    },\n    /* 22 */\n\n    /***/\n    function (module, exports) {\n      \"use strict\";\n\n      Object.defineProperty(exports, \"__esModule\", {\n        value: true\n      });\n      exports.default = _fsReset;\n\n      function _fsReset(state) {\n        state.listeners.forEach(function (unsubscribe, id) {\n          unsubscribe();\n        });\n        state.listeners = new Map();\n        state.refs = new Map();\n        state.syncs = new WeakMap();\n        return null;\n      }\n      /***/\n\n    }\n    /******/\n    ])\n  );\n});\n\n;","map":{"version":3,"sources":["/Users/alyssabartuch/Development/yarn-shop/yarn-shop-app/node_modules/re-base/dist/bundle.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","a","i","__WEBPACK_EXTERNAL_MODULE_6__","modules","installedModules","__webpack_require__","moduleId","id","loaded","call","m","c","p","_utils","_validators","_app","_app2","_interopRequireDefault","_push2","_push3","_fetch2","_fetch3","_post2","_post3","_sync2","_sync3","_bind2","_bind3","_update2","_update3","_reset2","_reset3","_removeBinding2","_removeBinding3","_remove2","_remove3","_fsSync2","_fsSync3","_fsRemoveBinding2","_fsRemoveBinding3","_fsBind2","_fsBind3","_fsGet2","_fsGet3","_fsRemoveDoc2","_fsRemoveDoc3","_fsAddToCollection2","_fsAddToCollection3","_fsRemoveFromCollection2","_fsRemoveFromCollection3","_fsUpdateDoc2","_fsUpdateDoc3","_fsReset2","_fsReset3","obj","__esModule","default","init","db","refs","Map","listeners","syncs","WeakMap","ref","rebase","initializedApp","app","timestamp","database","ServerValue","TIMESTAMP","listenTo","endpoint","options","bindToState","syncState","fetch","post","update","push","removeBinding","binding","remove","fn","reset","firestore","FieldValue","serverTimestamp","bindDoc","path","bindCollection","syncDoc","doc","listenToDoc","listenToCollection","addToCollection","key","updateDoc","get","removeDoc","removeFromCollection","createClass","_validateDatabase","Object","defineProperty","value","_fsCreateRef","_fsSetUnmountHandler","_setData","_handleError","_createNestedObject","_setUnmountHandler","_addFirestoreListener","_addListener","_fsUpdateSyncState","_updateSyncState","_firebaseRefsMixin","_addSync","_hasOwnNestedProperty","_getSegmentCount","_getNestedObject","_isNestedPath","_isObject","_isValid","_toArray","_fsPrepareData","_prepareData","_throwError","_setState","_returnRef","_addFirestoreQuery","_addQueries","_createHash","undefined","_typeof","Symbol","iterator","constructor","prototype","_defineProperty","enumerable","configurable","writable","toString","snapshot","arr","forEach","childSnapshot","val","split","length","arguments","keys","lastKey","pop","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","defaultValue","asArray","data","context","sync","existingSyncs","set","msg","code","Error","newState","setState","method","queries","needArgs","limitToFirst","limitToLast","orderByChild","startAt","endAt","equalTo","hasOwnProperty","query","invoker","hash","str","Math","random","char","charCodeAt","onFailure","removeListeners","componentWillUnmount","unmount","handleError","keepKeys","Array","isArray","shouldConvertToObject","reduce","acc","curr","item","prop","child","bind","boundOnFailure","on","then","state","prevState","reactSetState","called","onSnapshot","match","_newState2","_newState3","currentState","assign","_newState4","_newState5","slice","isCollection","meta","exists","withRefs","withIds","collection","empty","pathOrRef","segmentCount","_removeBinding","_ref","_ref2","listener","off","delete","currentSyncs","idx","findIndex","index","splice","_fsRemoveBinding","unsubscribe","_validateCollectionPath","_validateDocumentPath","_validateEndpoint","optionValidators","notObject","makeError","validQueries","indexOf","join","type","actual","defaultError","errorMsg","test","_push","returnEndpoint","_fetch","once","catch","_post","_sync","updateFirebase","stateKey","cb","syncsToCall","syncedKeys","map","nested","syncedKey","datum","allKeys","absent","find","k","_bind","_update","_reset","_fsSync","document","_fsBind","_fsGet","add","Promise","reject","_fsRemoveDoc","_fsAddToCollection","_fsRemoveFromCollection","batch","commit","_fsUpdateDoc","_fsReset"],"mappings":"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","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"firebase/app\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"firebase/app\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"firebase/app\")) : factory(root[\"firebase/app\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _app = __webpack_require__(6);\n\n\tvar _app2 = _interopRequireDefault(_app);\n\n\tvar _push2 = __webpack_require__(7);\n\n\tvar _push3 = _interopRequireDefault(_push2);\n\n\tvar _fetch2 = __webpack_require__(8);\n\n\tvar _fetch3 = _interopRequireDefault(_fetch2);\n\n\tvar _post2 = __webpack_require__(9);\n\n\tvar _post3 = _interopRequireDefault(_post2);\n\n\tvar _sync2 = __webpack_require__(10);\n\n\tvar _sync3 = _interopRequireDefault(_sync2);\n\n\tvar _bind2 = __webpack_require__(11);\n\n\tvar _bind3 = _interopRequireDefault(_bind2);\n\n\tvar _update2 = __webpack_require__(12);\n\n\tvar _update3 = _interopRequireDefault(_update2);\n\n\tvar _reset2 = __webpack_require__(13);\n\n\tvar _reset3 = _interopRequireDefault(_reset2);\n\n\tvar _removeBinding2 = __webpack_require__(3);\n\n\tvar _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n\tvar _remove2 = __webpack_require__(14);\n\n\tvar _remove3 = _interopRequireDefault(_remove2);\n\n\tvar _fsSync2 = __webpack_require__(15);\n\n\tvar _fsSync3 = _interopRequireDefault(_fsSync2);\n\n\tvar _fsRemoveBinding2 = __webpack_require__(4);\n\n\tvar _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n\tvar _fsBind2 = __webpack_require__(16);\n\n\tvar _fsBind3 = _interopRequireDefault(_fsBind2);\n\n\tvar _fsGet2 = __webpack_require__(17);\n\n\tvar _fsGet3 = _interopRequireDefault(_fsGet2);\n\n\tvar _fsRemoveDoc2 = __webpack_require__(18);\n\n\tvar _fsRemoveDoc3 = _interopRequireDefault(_fsRemoveDoc2);\n\n\tvar _fsAddToCollection2 = __webpack_require__(19);\n\n\tvar _fsAddToCollection3 = _interopRequireDefault(_fsAddToCollection2);\n\n\tvar _fsRemoveFromCollection2 = __webpack_require__(20);\n\n\tvar _fsRemoveFromCollection3 = _interopRequireDefault(_fsRemoveFromCollection2);\n\n\tvar _fsUpdateDoc2 = __webpack_require__(21);\n\n\tvar _fsUpdateDoc3 = _interopRequireDefault(_fsUpdateDoc2);\n\n\tvar _fsReset2 = __webpack_require__(22);\n\n\tvar _fsReset3 = _interopRequireDefault(_fsReset2);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\t//database\n\tmodule.exports = function () {\n\t  function init(db) {\n\t    return function () {\n\t      var refs = new Map();\n\t      var listeners = new Map();\n\t      var syncs = new WeakMap();\n\n\t      if (typeof db.ref === 'function') {\n\t        var rebase = {\n\t          initializedApp: db.app,\n\t          timestamp: _app2.default.database.ServerValue.TIMESTAMP,\n\t          listenTo: function listenTo(endpoint, options) {\n\t            return _bind3.default.call(this, endpoint, options, 'listenTo', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          bindToState: function bindToState(endpoint, options) {\n\t            return _bind3.default.call(this, endpoint, options, 'bindToState', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          syncState: function syncState(endpoint, options) {\n\t            return _sync3.default.call(this, endpoint, options, {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          fetch: function fetch(endpoint, options) {\n\t            return (0, _fetch3.default)(endpoint, options, db);\n\t          },\n\t          post: function post(endpoint, options) {\n\t            return (0, _post3.default)(endpoint, options, db);\n\t          },\n\t          update: function update(endpoint, options) {\n\t            return (0, _update3.default)(endpoint, options, { db: db });\n\t          },\n\t          push: function push(endpoint, options) {\n\t            return (0, _push3.default)(endpoint, options, db);\n\t          },\n\t          removeBinding: function removeBinding(binding) {\n\t            (0, _removeBinding3.default)(binding, {\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          remove: function remove(endpoint, fn) {\n\t            return (0, _remove3.default)(endpoint, db, fn);\n\t          },\n\t          reset: function reset() {\n\t            return (0, _reset3.default)({\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          }\n\t        };\n\t      } else {\n\t        var rebase = {\n\t          initializedApp: db.app,\n\t          timestamp: _app2.default.firestore.FieldValue.serverTimestamp(),\n\t          bindDoc: function bindDoc(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'bindDoc', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          bindCollection: function bindCollection(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'bindCollection', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          syncDoc: function syncDoc(doc, options) {\n\t            return _fsSync3.default.call(this, doc, options, {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          listenToDoc: function listenToDoc(doc, options) {\n\t            return _fsBind3.default.call(this, doc, options, 'listenToDoc', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          listenToCollection: function listenToCollection(path, options) {\n\t            return _fsBind3.default.call(this, path, options, 'listenToCollection', {\n\t              db: db,\n\t              refs: refs,\n\t              listeners: listeners\n\t            });\n\t          },\n\t          addToCollection: function addToCollection(path, doc, key) {\n\t            return _fsAddToCollection3.default.call(this, path, doc, db, key);\n\t          },\n\t          updateDoc: function updateDoc(path, doc, options) {\n\t            return _fsUpdateDoc3.default.call(this, path, doc, db);\n\t          },\n\t          get: function get(path, options) {\n\t            return _fsGet3.default.call(this, path, options, db);\n\t          },\n\t          removeDoc: function removeDoc(path) {\n\t            return (0, _fsRemoveDoc3.default)(path, db);\n\t          },\n\t          removeFromCollection: function removeFromCollection(path, options) {\n\t            return (0, _fsRemoveFromCollection3.default)(path, db, options);\n\t          },\n\t          removeBinding: function removeBinding(binding) {\n\t            (0, _fsRemoveBinding3.default)(binding, {\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          },\n\t          reset: function reset() {\n\t            return (0, _fsReset3.default)({\n\t              refs: refs,\n\t              listeners: listeners,\n\t              syncs: syncs\n\t            });\n\t          }\n\t        };\n\t      }\n\t      return rebase;\n\t    }();\n\t  }\n\n\t  return {\n\t    createClass: function createClass(db) {\n\t      (0, _validators._validateDatabase)(db);\n\t      return init(db);\n\t    }\n\t  };\n\t}();\n\n\t//firestore\n\t//helpers\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._fsCreateRef = exports._fsSetUnmountHandler = exports._setData = exports._handleError = exports._createNestedObject = exports._setUnmountHandler = exports._addFirestoreListener = exports._addListener = exports._fsUpdateSyncState = exports._updateSyncState = exports._firebaseRefsMixin = exports._addSync = exports._hasOwnNestedProperty = exports._getSegmentCount = exports._getNestedObject = exports._isNestedPath = exports._isObject = exports._isValid = exports._toArray = exports._fsPrepareData = exports._prepareData = exports._throwError = exports._setState = exports._returnRef = exports._addFirestoreQuery = exports._addQueries = exports._createHash = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar _removeBinding2 = __webpack_require__(3);\n\n\tvar _removeBinding3 = _interopRequireDefault(_removeBinding2);\n\n\tvar _fsRemoveBinding2 = __webpack_require__(4);\n\n\tvar _fsRemoveBinding3 = _interopRequireDefault(_fsRemoveBinding2);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\tvar _isObject = function _isObject(obj) {\n\t  return Object.prototype.toString.call(obj) === '[object Object]' ? true : false;\n\t};\n\n\tvar _toArray = function _toArray(snapshot) {\n\t  var arr = [];\n\t  snapshot.forEach(function (childSnapshot) {\n\t    var val = childSnapshot.val();\n\t    if (_isObject(val)) {\n\t      val.key = childSnapshot.key;\n\t    }\n\t    arr.push(val);\n\t  });\n\t  return arr;\n\t};\n\n\tvar _isValid = function _isValid(value) {\n\t  return typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean' || (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' ? true : false;\n\t};\n\n\tvar _isNestedPath = function _isNestedPath(path) {\n\t  return path.split('.').length > 1 ? true : false;\n\t};\n\n\tvar _createNestedObject = function _createNestedObject(path, value) {\n\t  var obj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  var keys = path.split('.');\n\t  var lastKey = value === undefined ? false : keys.pop();\n\t  var root = obj;\n\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\n\t  try {\n\t    for (var _iterator = keys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var key = _step.value;\n\n\t      obj = obj[key] = obj[key] || {};\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\n\t  if (lastKey) obj[lastKey] = value;\n\n\t  return root;\n\t};\n\n\tvar _getNestedObject = function _getNestedObject(obj, path) {\n\t  if (_isNestedPath(path) === false) return;\n\n\t  var keys = path.split('.');\n\t  var _iteratorNormalCompletion2 = true;\n\t  var _didIteratorError2 = false;\n\t  var _iteratorError2 = undefined;\n\n\t  try {\n\t    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t      var key = _step2.value;\n\n\t      if (!obj || (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') return;\n\t      obj = obj[key];\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError2 = true;\n\t    _iteratorError2 = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t        _iterator2.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError2) {\n\t        throw _iteratorError2;\n\t      }\n\t    }\n\t  }\n\n\t  return obj;\n\t};\n\n\tvar _hasOwnNestedProperty = function _hasOwnNestedProperty(obj, path) {\n\t  return _getNestedObject(obj, path) === undefined ? false : true;\n\t};\n\n\tvar _prepareData = function _prepareData(snapshot) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t  var defaultValue = options.defaultValue,\n\t      asArray = options.asArray;\n\n\t  var data = snapshot.val();\n\t  if (data === null && _isValid(defaultValue)) return defaultValue;\n\t  if (asArray === true) return _toArray(snapshot);\n\t  return data === null ? {} : data;\n\t};\n\n\tvar _addSync = function _addSync(context, sync, syncs) {\n\t  var existingSyncs = syncs.get(context) || [];\n\t  existingSyncs.push(sync);\n\t  syncs.set(context, existingSyncs);\n\t};\n\n\tvar _throwError = function _throwError(msg, code) {\n\t  var err = new Error('REBASE: ' + msg);\n\t  err.code = code;\n\t  throw err;\n\t};\n\n\tvar _setState = function _setState(newState) {\n\t  this.setState(newState);\n\t};\n\n\tvar _returnRef = function _returnRef(endpoint, method, id, context) {\n\t  return { endpoint: endpoint, method: method, id: id, context: context };\n\t};\n\n\tvar _addQueries = function _addQueries(ref, queries) {\n\t  var needArgs = {\n\t    limitToFirst: true,\n\t    limitToLast: true,\n\t    orderByChild: true,\n\t    startAt: true,\n\t    endAt: true,\n\t    equalTo: true\n\t  };\n\n\t  for (var key in queries) {\n\t    /* istanbul ignore else */\n\t    if (queries.hasOwnProperty(key)) {\n\t      if (needArgs[key]) {\n\t        ref = ref[key](queries[key]);\n\t      } else {\n\t        ref = ref[key]();\n\t      }\n\t    }\n\t  }\n\t  return ref;\n\t};\n\n\tvar _addFirestoreQuery = function _addFirestoreQuery(ref, query) {\n\t  if (query) {\n\t    return query(ref);\n\t  }\n\t  return ref;\n\t};\n\n\tvar _createHash = function _createHash(endpoint, invoker) {\n\t  var hash = 0;\n\t  var str = endpoint + invoker + Math.random();\n\t  for (var i = 0; i < str.length; i++) {\n\t    var char = str.charCodeAt(i);\n\t    hash = (hash << 5) - hash + char;\n\t    hash = hash & hash;\n\t  }\n\t  return hash;\n\t};\n\n\tvar _firebaseRefsMixin = function _firebaseRefsMixin(id, ref, refs) {\n\t  refs.set(id, ref);\n\t};\n\n\tvar _handleError = function _handleError(onFailure, err) {\n\t  if (err && typeof onFailure === 'function') {\n\t    onFailure(err);\n\t  }\n\t};\n\n\tvar _setUnmountHandler = function _setUnmountHandler(context, id, refs, listeners, syncs) {\n\t  var removeListeners = function removeListeners() {\n\t    (0, _removeBinding3.default)({ context: context, id: id }, { refs: refs, listeners: listeners, syncs: syncs });\n\t  };\n\t  if (typeof context.componentWillUnmount === 'function') {\n\t    var unmount = context.componentWillUnmount;\n\t  }\n\t  context.componentWillUnmount = function () {\n\t    removeListeners();\n\t    if (unmount) unmount.call(context);\n\t  };\n\t};\n\n\tvar _fsSetUnmountHandler = function _fsSetUnmountHandler(context, id, refs, listeners, syncs) {\n\t  var removeListeners = function removeListeners() {\n\t    (0, _fsRemoveBinding3.default)({ context: context, id: id }, { refs: refs, listeners: listeners, syncs: syncs });\n\t  };\n\t  if (typeof context.componentWillUnmount === 'function') {\n\t    var unmount = context.componentWillUnmount;\n\t  }\n\t  context.componentWillUnmount = function () {\n\t    removeListeners();\n\t    if (unmount) unmount.call(context);\n\t  };\n\t};\n\n\tvar _setData = function _setData(ref, data, handleError, keepKeys) {\n\t  if (Array.isArray(data) && keepKeys) {\n\t    var shouldConvertToObject = data.reduce(function (acc, curr) {\n\t      return acc ? acc : _isObject(curr) && curr.hasOwnProperty('key');\n\t    }, false);\n\t    if (shouldConvertToObject) {\n\t      data = data.reduce(function (acc, item) {\n\t        acc[item.key] = item;\n\t        return acc;\n\t      }, {});\n\t    }\n\t  }\n\t  ref.set(data, handleError);\n\t};\n\n\tvar _updateSyncState = function _updateSyncState(ref, onFailure, keepKeys, data) {\n\t  if (_isObject(data)) {\n\t    for (var prop in data) {\n\t      //allow timestamps to be set\n\t      if (prop !== '.sv') {\n\t        _updateSyncState(ref.child(prop), onFailure, keepKeys, data[prop]);\n\t      } else {\n\t        _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n\t      }\n\t    }\n\t  } else {\n\t    _setData(ref, data, _handleError.bind(null, onFailure), keepKeys);\n\t  }\n\t};\n\n\tvar _fsUpdateSyncState = function _fsUpdateSyncState(ref, data) {\n\t  ref.set(data);\n\t};\n\n\tvar _addListener = function _addListener(id, invoker, options, ref, listeners) {\n\t  ref = _addQueries(ref, options.queries);\n\t  var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : null;\n\t  listeners.set(id, ref.on('value', function (snapshot) {\n\t    var data = _prepareData(snapshot, options);\n\t    if (invoker === 'listenTo') {\n\t      options.then.call(options.context, data);\n\t    } else {\n\t      var newState = _defineProperty({}, options.state, data);\n\t      if (_isNestedPath(options.state)) {\n\t        var root = options.state.split('.')[0];\n\t        // Merge the previous state with the new one\n\t        var prevState = _defineProperty({}, root, options.context.state[root]);\n\t        newState = _createNestedObject(options.state, data, prevState);\n\t      }\n\t      if (invoker === 'syncState') {\n\t        options.reactSetState.call(options.context, newState);\n\t        if (options.then && options.then.called === false) {\n\t          options.then.call(options.context);\n\t          options.then.called = true;\n\t        }\n\t      } else if (invoker === 'bindToState') {\n\t        _setState.call(options.context, newState);\n\t        if (options.then && options.then.called === false) {\n\t          options.then.call(options.context);\n\t          options.then.called = true;\n\t        }\n\t      }\n\t    }\n\t  }, boundOnFailure));\n\t};\n\n\tvar _addFirestoreListener = function _addFirestoreListener(id, invoker, options, ref, listeners) {\n\t  ref = _addFirestoreQuery(ref, options.query);\n\t  var boundOnFailure = typeof options.onFailure === 'function' ? options.onFailure.bind(options.context) : undefined;\n\t  listeners.set(id, ref.onSnapshot(function (snapshot) {\n\t    if (invoker.match(/^listenTo/)) {\n\t      if (invoker === 'listenToDoc') {\n\t        var newState = _fsPrepareData(snapshot, options);\n\t        return options.then.call(options.context, newState);\n\t      }\n\t      if (invoker === 'listenToCollection') {\n\t        var _newState2 = _fsPrepareData(snapshot, options, true);\n\t        return options.then.call(options.context, _newState2);\n\t      }\n\t    } else {\n\t      if (invoker === 'syncDoc') {\n\t        var _newState3 = _fsPrepareData(snapshot, options);\n\t        options.reactSetState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState3);\n\t        });\n\t      } else if (invoker === 'bindDoc') {\n\t        var _newState4 = _fsPrepareData(snapshot, options);\n\t        _setState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState4);\n\t        });\n\t      } else if (invoker === 'bindCollection') {\n\t        var _newState5 = _fsPrepareData(snapshot, options, true);\n\t        _setState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, _newState5);\n\t        });\n\t      }\n\t      if (options.then && options.then.called === false) {\n\t        options.then.call(options.context);\n\t        options.then.called = true;\n\t      }\n\t    }\n\t  }, boundOnFailure));\n\t};\n\n\tvar _getSegmentCount = function _getSegmentCount(path) {\n\t  return path.match(/^\\//) ? path.split('/').slice(1).length : path.split('/').length;\n\t};\n\n\tvar _fsPrepareData = function _fsPrepareData(snapshot, options) {\n\t  var isCollection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n\t  var meta = {};\n\t  if (!isCollection) {\n\t    var data = {};\n\t    if (snapshot.exists) {\n\t      if (options.withRefs) meta.ref = snapshot.ref;\n\t      if (options.withIds) meta.id = snapshot.id;\n\t      data = snapshot.data();\n\t    } else {\n\t      data = {};\n\t    }\n\t    return options.state ? _defineProperty({}, options.state, Object.assign({}, data, meta)) : Object.assign({}, data, meta);\n\t  }\n\t  var collection = [];\n\t  if (!snapshot.empty) {\n\t    snapshot.forEach(function (doc) {\n\t      if (options.withRefs) meta.ref = doc.ref;\n\t      if (options.withIds) meta.id = doc.id;\n\t      collection.push(Object.assign({}, doc.data(), meta));\n\t    });\n\t  }\n\t  return options.state ? _defineProperty({}, options.state, collection) : collection;\n\t};\n\n\tvar _fsCreateRef = function _fsCreateRef(pathOrRef, db) {\n\t  if ((typeof pathOrRef === 'undefined' ? 'undefined' : _typeof(pathOrRef)) === 'object') {\n\t    return pathOrRef;\n\t  }\n\t  var segmentCount = _getSegmentCount(pathOrRef);\n\t  var ref;\n\t  if (segmentCount % 2 === 0) {\n\t    ref = db.doc(pathOrRef);\n\t  } else {\n\t    ref = db.collection(pathOrRef);\n\t  }\n\t  return ref;\n\t};\n\n\texports._createHash = _createHash;\n\texports._addQueries = _addQueries;\n\texports._addFirestoreQuery = _addFirestoreQuery;\n\texports._returnRef = _returnRef;\n\texports._setState = _setState;\n\texports._throwError = _throwError;\n\texports._prepareData = _prepareData;\n\texports._fsPrepareData = _fsPrepareData;\n\texports._toArray = _toArray;\n\texports._isValid = _isValid;\n\texports._isObject = _isObject;\n\texports._isNestedPath = _isNestedPath;\n\texports._getNestedObject = _getNestedObject;\n\texports._getSegmentCount = _getSegmentCount;\n\texports._hasOwnNestedProperty = _hasOwnNestedProperty;\n\texports._addSync = _addSync;\n\texports._firebaseRefsMixin = _firebaseRefsMixin;\n\texports._updateSyncState = _updateSyncState;\n\texports._fsUpdateSyncState = _fsUpdateSyncState;\n\texports._addListener = _addListener;\n\texports._addFirestoreListener = _addFirestoreListener;\n\texports._setUnmountHandler = _setUnmountHandler;\n\texports._createNestedObject = _createNestedObject;\n\texports._handleError = _handleError;\n\texports._setData = _setData;\n\texports._fsSetUnmountHandler = _fsSetUnmountHandler;\n\texports._fsCreateRef = _fsCreateRef;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _removeBinding;\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _removeBinding(_ref, _ref2) {\n\t  var id = _ref.id,\n\t      context = _ref.context;\n\t  var refs = _ref2.refs,\n\t      listeners = _ref2.listeners,\n\t      syncs = _ref2.syncs;\n\n\t  var ref = refs.get(id);\n\t  var listener = listeners.get(id);\n\t  if (typeof ref !== 'undefined') {\n\t    ref.off('value', listener);\n\t    refs.delete(id);\n\t    listeners.delete(id);\n\t    if (syncs) {\n\t      var currentSyncs = syncs.get(context);\n\t      if (currentSyncs && currentSyncs.length > 0) {\n\t        var idx = currentSyncs.findIndex(function (item, index) {\n\t          return item.id === id;\n\t        });\n\t        /*istanbul ignore else */\n\t        if (idx !== -1) {\n\t          currentSyncs.splice(idx, 1);\n\t          syncs.set(context, currentSyncs);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveBinding;\n\tfunction _fsRemoveBinding(_ref, _ref2) {\n\t  var id = _ref.id,\n\t      context = _ref.context;\n\t  var refs = _ref2.refs,\n\t      listeners = _ref2.listeners,\n\t      syncs = _ref2.syncs;\n\n\t  var unsubscribe = listeners.get(id);\n\t  if (typeof unsubscribe === 'function') {\n\t    unsubscribe();\n\t    refs.delete(id);\n\t    listeners.delete(id);\n\t    if (syncs) {\n\t      var currentSyncs = syncs.get(context);\n\t      if (currentSyncs && currentSyncs.length > 0) {\n\t        var idx = currentSyncs.findIndex(function (item, index) {\n\t          return item.id === id;\n\t        });\n\t        /*istanbul ignore else */\n\t        if (idx !== -1) {\n\t          currentSyncs.splice(idx, 1);\n\t          syncs.set(context, currentSyncs);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports._validateCollectionPath = exports._validateDocumentPath = exports._validateEndpoint = exports._validateDatabase = exports.optionValidators = undefined;\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar optionValidators = {\n\t  notObject: function notObject(options) {\n\t    if (!(0, _utils._isObject)(options)) {\n\t      (0, _utils._throwError)('The options argument must be an object. Instead, got ' + options, 'INVALID_OPTIONS');\n\t    }\n\t  },\n\t  context: function context(options) {\n\t    this.notObject(options);\n\t    if (!options.context || !(0, _utils._isObject)(options.context)) {\n\t      this.makeError('context', 'object', options.context);\n\t    }\n\t  },\n\t  state: function state(options) {\n\t    this.notObject(options);\n\t    if (!options.state || typeof options.state !== 'string') {\n\t      this.makeError('state', 'string', options.state);\n\t    }\n\t  },\n\t  then: function then(options) {\n\t    this.notObject(options);\n\t    if (typeof options.then === 'undefined' || typeof options.then !== 'function') {\n\t      this.makeError('then', 'function', options.then);\n\t    }\n\t  },\n\t  data: function data(options) {\n\t    this.notObject(options);\n\t    if (typeof options.data === 'undefined') {\n\t      this.makeError('data', 'ANY', options.data);\n\t    }\n\t  },\n\t  query: function query(options) {\n\t    this.notObject(options);\n\t    var validQueries = ['limitToFirst', 'limitToLast', 'orderByChild', 'orderByValue', 'orderByKey', 'orderByPriority', 'startAt', 'endAt', 'equalTo'];\n\t    var queries = options.queries;\n\t    for (var key in queries) {\n\t      if (queries.hasOwnProperty(key) && validQueries.indexOf(key) === -1) {\n\t        (0, _utils._throwError)('The query field must contain valid Firebase queries.  Expected one of [' + validQueries.join(', ') + ']. Instead, got ' + key, 'INVALID_OPTIONS');\n\t      }\n\t    }\n\t  },\n\t  defaultValue: function defaultValue(options) {\n\t    this.notObject(options);\n\t    if (options.hasOwnProperty('defaultValue')) {\n\t      if (!(0, _utils._isValid)(options.defaultValue)) {\n\t        (0, _utils._throwError)('The typeof defaultValue must be one of string, number, boolean, object.', 'INVALID_OPTIONS');\n\t      }\n\t    }\n\t  },\n\t  makeError: function makeError(prop, type, actual) {\n\t    (0, _utils._throwError)('The options argument must contain a ' + prop + ' property of type ' + type + '. Instead, got ' + actual, 'INVALID_OPTIONS');\n\t  }\n\t};\n\n\tvar _validateEndpoint = function _validateEndpoint(endpoint) {\n\t  if ((typeof endpoint === 'undefined' ? 'undefined' : _typeof(endpoint)) === 'object') {\n\t    if (endpoint.hasOwnProperty('firestore')) {\n\t      return;\n\t    }\n\t  }\n\t  var defaultError = 'The Firebase endpoint you are trying to listen to';\n\t  var errorMsg;\n\t  if (typeof endpoint !== 'string') {\n\t    errorMsg = defaultError + ' must be a string. Instead, got ' + endpoint;\n\t  } else if (endpoint.length === 0) {\n\t    errorMsg = defaultError + ' must be a non-empty string. Instead, got ' + endpoint;\n\t  } else if (endpoint.length > 768) {\n\t    errorMsg = defaultError + ' is too long to be stored in Firebase. It must be less than 768 characters.';\n\t  } else if (/^$|[\\[\\]\\#\\$]|.{1}[\\.]/.test(endpoint)) {\n\t    errorMsg = defaultError + ' in invalid. Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".';\n\t  }\n\n\t  if (typeof errorMsg !== 'undefined') {\n\t    (0, _utils._throwError)(errorMsg, 'INVALID_ENDPOINT');\n\t  }\n\t};\n\n\tvar _validateDatabase = function _validateDatabase(db) {\n\t  var defaultError = 'Rebase.createClass failed.';\n\t  var errorMsg;\n\t  if ((typeof db === 'undefined' ? 'undefined' : _typeof(db)) !== 'object' || !db.ref && !db.collection) {\n\t    errorMsg = defaultError + ' Expected an initialized firebase or firestore database object.';\n\t  }\n\t  if (typeof errorMsg !== 'undefined') {\n\t    (0, _utils._throwError)(errorMsg, 'INVALID_CONFIG');\n\t  }\n\t};\n\n\tvar _validateDocumentPath = function _validateDocumentPath(path) {\n\t  if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.hasOwnProperty('firestore')) return;\n\t  var defaultError = 'Invalid document path or reference.';\n\t  if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t  var segmentCount = (0, _utils._getSegmentCount)(path);\n\t  if (segmentCount % 2 !== 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t};\n\n\tvar _validateCollectionPath = function _validateCollectionPath(path) {\n\t  if ((typeof path === 'undefined' ? 'undefined' : _typeof(path)) === 'object' && path.hasOwnProperty('firestore')) return;\n\t  var defaultError = 'Invalid collection path or reference.';\n\t  if (typeof path !== 'string') (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t  var segmentCount = (0, _utils._getSegmentCount)(path);\n\t  if (segmentCount % 2 === 0) (0, _utils._throwError)(defaultError, 'INVALID_ENDPOINT');\n\t};\n\n\texports.optionValidators = optionValidators;\n\texports._validateDatabase = _validateDatabase;\n\texports._validateEndpoint = _validateEndpoint;\n\texports._validateDocumentPath = _validateDocumentPath;\n\texports._validateCollectionPath = _validateCollectionPath;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _push;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _push(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = db.ref(endpoint);\n\t  var returnEndpoint;\n\t  if (options.then) {\n\t    returnEndpoint = ref.push(options.data, options.then);\n\t  } else {\n\t    returnEndpoint = ref.push(options.data);\n\t  }\n\t  return returnEndpoint;\n\t}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fetch;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fetch(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.defaultValue(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  var ref = db.ref(endpoint);\n\t  ref = (0, _utils._addQueries)(ref, options.queries);\n\t  return ref.once('value').then(function (snapshot) {\n\t    var data = (0, _utils._prepareData)(snapshot, options);\n\t    if (options.then) {\n\t      options.then.call(options.context, data);\n\t    }\n\t    return data;\n\t  }).catch(function (err) {\n\t    //call onFailure callback if it exists otherwise rethrow error\n\t    if (options.onFailure && typeof options.onFailure === 'function') {\n\t      options.onFailure.call(options.context, err);\n\t    } else {\n\t      throw err;\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _post;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _post(endpoint, options, db) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = db.ref(endpoint);\n\t  if (options.then) {\n\t    return ref.set(options.data, options.then);\n\t  } else {\n\t    return ref.set(options.data);\n\t  }\n\t}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _sync;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _sync(endpoint, options, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.state(options);\n\t  _validators.optionValidators.defaultValue(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  options.then && (options.then.called = false);\n\t  options.onFailure = options.onFailure ? options.onFailure.bind(options.context) : null;\n\t  options.keepKeys = options.keepKeys && options.asArray;\n\n\t  //store reference to react's setState\n\t  if (_sync.called !== true) {\n\t    _sync.reactSetState = options.context.setState;\n\t    _sync.called = true;\n\t  }\n\t  options.reactSetState = _sync.reactSetState;\n\n\t  var ref = state.db.ref(endpoint);\n\t  var id = (0, _utils._createHash)(endpoint, 'syncState');\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addListener)(id, 'syncState', options, ref, state.listeners);\n\t  (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  var sync = {\n\t    id: id,\n\t    updateFirebase: _utils._updateSyncState.bind(null, ref, options.onFailure, options.keepKeys),\n\t    stateKey: options.state\n\t  };\n\t  (0, _utils._addSync)(options.context, sync, state.syncs);\n\n\t  options.context.setState = function (data, cb) {\n\t    //if setState is a function, call it first before syncing to fb\n\t    if (typeof data === 'function') {\n\t      return _sync.reactSetState.call(options.context, data, function () {\n\t        if (cb) cb.call(options.context);\n\t        return options.context.setState.call(options.context, options.context.state);\n\t      });\n\t    }\n\t    //if callback is supplied, call setState first before syncing to fb\n\t    if (typeof cb === 'function') {\n\t      return _sync.reactSetState.call(options.context, data, function () {\n\t        cb();\n\t        return options.context.setState.call(options.context, data);\n\t      });\n\t    }\n\t    var syncsToCall = state.syncs.get(this);\n\t    //if sync does not exist, call original Component.setState\n\t    if (!syncsToCall || syncsToCall.length === 0) {\n\t      return _sync.reactSetState.call(this, data, cb);\n\t    }\n\t    var syncedKeys = syncsToCall.map(function (sync) {\n\t      return {\n\t        key: sync.stateKey,\n\t        update: sync.updateFirebase,\n\t        nested: (0, _utils._isNestedPath)(sync.stateKey)\n\t      };\n\t    });\n\t    syncedKeys.forEach(function (syncedKey) {\n\t      if (syncedKey.nested === true) {\n\t        if ((0, _utils._hasOwnNestedProperty)(data, syncedKey.key)) {\n\t          var datum = (0, _utils._getNestedObject)(data, syncedKey.key);\n\t          syncedKey.update(datum);\n\t        }\n\t      } else if (data.hasOwnProperty(syncedKey.key)) {\n\t        syncedKey.update(data[syncedKey.key]);\n\t      }\n\t    });\n\t    var allKeys = Object.keys(data);\n\t    allKeys.forEach(function (key) {\n\t      var absent = !syncedKeys.find(function (syncedKey) {\n\t        var k = syncedKey.key;\n\t        if (syncedKey.nested === true) {\n\t          // Check with the root\n\t          k = syncedKey.key.split('.')[0];\n\t        }\n\t        return k === key;\n\t      });\n\n\t      if (absent) {\n\t        var update = {};\n\t        update[key] = data[key];\n\t        _sync.reactSetState.call(options.context, update, cb);\n\t      }\n\t    });\n\t  };\n\t  return (0, _utils._returnRef)(endpoint, 'syncState', id, options.context);\n\t}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _bind;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _bind(endpoint, options, invoker, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.defaultValue(options);\n\t  invoker === 'listenTo' && _validators.optionValidators.then(options);\n\t  invoker === 'bindToState' && _validators.optionValidators.state(options);\n\t  options.queries && _validators.optionValidators.query(options);\n\t  options.then && (options.then.called = false);\n\n\t  var id = (0, _utils._createHash)(endpoint, invoker);\n\t  var ref = state.db.ref(endpoint);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addListener)(id, invoker, options, ref, state.listeners);\n\t  (0, _utils._setUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  return (0, _utils._returnRef)(endpoint, invoker, id, options.context);\n\t}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _update;\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _update(endpoint, options, state) {\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  _validators.optionValidators.data(options);\n\t  var ref = state.db.ref(endpoint);\n\t  if (options.then) {\n\t    return ref.update(options.data, options.then);\n\t  } else {\n\t    return ref.update(options.data);\n\t  }\n\t}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _reset;\n\tfunction _reset(state) {\n\t  state.refs.forEach(function (ref, id) {\n\t    ref.off('value', state.listeners.get(id));\n\t  });\n\t  state.listeners = new Map();\n\t  state.refs = new Map();\n\t  state.syncs = new WeakMap();\n\t  return null;\n\t}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\texports.default = function (endpoint, db, fn) {\n\t  return db.ref().child(endpoint).remove(fn);\n\t};\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsSync;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsSync(document, options, state) {\n\t  //validate arguments\n\t  (0, _validators._validateDocumentPath)(document);\n\t  _validators.optionValidators.context(options);\n\t  _validators.optionValidators.state(options);\n\t  options.then && (options.then.called = false);\n\t  //store reference to react's setState\n\t  if (_fsSync.called !== true) {\n\t    _fsSync.reactSetState = options.context.setState;\n\t    _fsSync.called = true;\n\t  }\n\t  options.reactSetState = _fsSync.reactSetState;\n\n\t  var id = (0, _utils._createHash)(document, 'syncDoc');\n\t  var ref = (0, _utils._fsCreateRef)(document, state.db);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addFirestoreListener)(id, 'syncDoc', options, ref, state.listeners);\n\t  (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  var sync = {\n\t    id: id,\n\t    updateFirebase: _utils._fsUpdateSyncState.bind(null, ref),\n\t    stateKey: options.state\n\t  };\n\t  (0, _utils._addSync)(options.context, sync, state.syncs);\n\t  options.context.setState = function (data, cb) {\n\t    //if setState is a function, call it first before syncing to fb\n\t    if (typeof data === 'function') {\n\t      return _fsSync.reactSetState.call(options.context, data, function () {\n\t        if (cb) cb.call(options.context);\n\t        return options.context.setState.call(options.context, options.context.state);\n\t      });\n\t    }\n\t    //if callback is supplied, call setState first before syncing to fb\n\t    if (typeof cb === 'function') {\n\t      return _fsSync.reactSetState.call(options.context, data, function () {\n\t        cb();\n\t        return options.context.setState.call(options.context, data);\n\t      });\n\t    }\n\t    var syncsToCall = state.syncs.get(this);\n\t    //if sync does not exist, call original Component.setState\n\t    if (!syncsToCall || syncsToCall.length === 0) {\n\t      return _fsSync.reactSetState.call(this, data, cb);\n\t    }\n\t    //send the update of synced keys to firestore\n\t    var syncedKeys = syncsToCall.map(function (sync) {\n\t      return {\n\t        key: sync.stateKey,\n\t        update: sync.updateFirebase\n\t      };\n\t    });\n\t    syncedKeys.forEach(function (syncedKey) {\n\t      if (data[syncedKey.key]) {\n\t        syncedKey.update(data[syncedKey.key]);\n\t      }\n\t    });\n\t    //send the update of all other keys through setState\n\t    var allKeys = Object.keys(data);\n\t    allKeys.forEach(function (key) {\n\t      var absent = !syncedKeys.find(function (syncedKey) {\n\t        return syncedKey.key === key;\n\t      });\n\t      if (absent) {\n\t        var update = {};\n\t        update[key] = data[key];\n\t        _fsSync.reactSetState.call(options.context, function (currentState) {\n\t          return Object.assign(currentState, update);\n\t        }, cb);\n\t      }\n\t    });\n\t  };\n\t  return (0, _utils._returnRef)(document, 'syncDoc', id, options.context);\n\t}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsBind;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsBind(path, options, invoker, state) {\n\t  _validators.optionValidators.context(options);\n\t  options.then && (options.then.called = false);\n\t  if (invoker === 'bindDoc') {\n\t    (0, _validators._validateDocumentPath)(path);\n\t  }\n\t  if (invoker === 'bindCollection') {\n\t    _validators.optionValidators.state(options);\n\t    (0, _validators._validateCollectionPath)(path);\n\t  }\n\t  if (invoker === 'listenToDoc') {\n\t    (0, _validators._validateDocumentPath)(path);\n\t    _validators.optionValidators.then(options);\n\t  }\n\t  if (invoker === 'listenToCollection') {\n\t    (0, _validators._validateCollectionPath)(path);\n\t    _validators.optionValidators.then(options);\n\t  }\n\t  var ref = (0, _utils._fsCreateRef)(path, state.db);\n\t  var id = (0, _utils._createHash)(path, invoker);\n\t  (0, _utils._firebaseRefsMixin)(id, ref, state.refs);\n\t  (0, _utils._addFirestoreListener)(id, invoker, options, ref, state.listeners);\n\t  (0, _utils._fsSetUnmountHandler)(options.context, id, state.refs, state.listeners, state.syncs);\n\t  return (0, _utils._returnRef)(path, invoker, id, options.context);\n\t}\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsGet;\n\n\tvar _utils = __webpack_require__(2);\n\n\tvar _validators = __webpack_require__(5);\n\n\tfunction _fsGet(endpoint) {\n\t  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t  var db = arguments[2];\n\n\t  (0, _validators._validateEndpoint)(endpoint);\n\t  var ref = (0, _utils._fsCreateRef)(endpoint, db);\n\t  //check if ref is a collection\n\t  var isCollection = !!ref.add;\n\t  ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n\t  return ref.get().then(function (snapshot) {\n\t    if (isCollection && !snapshot.empty || !isCollection && snapshot.exists) {\n\t      return (0, _utils._fsPrepareData)(snapshot, options, isCollection);\n\t    } else {\n\t      return Promise.reject(new Error('No Result'));\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveDoc;\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsRemoveDoc(path, db) {\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  return ref.delete();\n\t}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsAddToCollection;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsAddToCollection(path, doc, db, key) {\n\t  (0, _validators._validateCollectionPath)(path);\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  if (key) {\n\t    return ref.doc(key).set(doc);\n\t  }\n\t  return ref.add(doc);\n\t}\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsRemoveFromCollection;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsRemoveFromCollection(path, db) {\n\t  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n\t  (0, _validators._validateCollectionPath)(path);\n\t  var ref = (0, _utils._fsCreateRef)(path, db);\n\t  ref = (0, _utils._addFirestoreQuery)(ref, options.query);\n\t  return ref.get().then(function (snapshot) {\n\t    if (!snapshot.empty) {\n\t      var batch = db.batch();\n\t      snapshot.forEach(function (doc) {\n\t        batch.delete(doc.ref);\n\t      });\n\t      return batch.commit();\n\t    }\n\t  });\n\t}\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsUpdateDoc;\n\n\tvar _validators = __webpack_require__(5);\n\n\tvar _utils = __webpack_require__(2);\n\n\tfunction _fsUpdateDoc(document, data, db) {\n\t  (0, _validators._validateDocumentPath)(document);\n\t  var ref = (0, _utils._fsCreateRef)(document, db);\n\t  return ref.update(data);\n\t}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = _fsReset;\n\tfunction _fsReset(state) {\n\t  state.listeners.forEach(function (unsubscribe, id) {\n\t    unsubscribe();\n\t  });\n\t  state.listeners = new Map();\n\t  state.refs = new Map();\n\t  state.syncs = new WeakMap();\n\t  return null;\n\t}\n\n/***/ })\n/******/ ])\n});\n;"]},"metadata":{},"sourceType":"script"}